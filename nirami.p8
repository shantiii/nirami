pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

#include dialog.lua

function init_street()
 street = {
  {17,18,1,1,2,1,1,1},
  {17,18,1,1,2,1,1,1},
  {17,18,1,1,2,1,1,1},
  {17,18,1,1,2,1,1,1},
  {17,18,1,1,2,1,7,1},
  {17,18,1,1,2,1,1,1},
  {20,18,1,1,2,1,1,1},
  {36,18,1,1,2,1,1,1}
 }
end

function draw_street()
 --8x8 window in the middle of the screen
 for i=1,8 do
  for j=1,8 do
   spr(street[j][i], i*8+24, j*8+24)
  end
 end
end

function _init()
 init_street()
 local forest = {
  [1] = {"it's a lovely day\nin northern tokyo", "and you are a\nhorrible gaijin", 2},
  [2] = nil,
  [3] = "where from?",
 }
 dialog_state = dia_init(forest)
end 

function _update()
 if btnp(0)
 then
 dia_update(dialog_state, true)
 else
 end
end

function _draw()
 cls()
 draw_street()
 dia_render(dialog_state)
end

-->8
---where is this?
__gfx__
0000000055555555555dd55577777777000000000000000000000000555555550000000000000000000000000000000000000000000000000000000000000000
0000000055555555555dd55577777777000000000000000000ffff00555555550000000000000000000000000000000000000000000000000000000000000000
0070070055555555555dd555777777770000000000000000005ff500554444550000000000000000000000000000000000000000000000000000000000000000
00077000555555555555555577788777000000000000000000ffff00554f4f5500000cc000000000000000000000000000000000000000000000000000000000
000770005555555555555555777887770000000000000000000224405544445500cccc0000000000000000000000000000000000000000000000000000000000
0070070055555555555dd55577777777000000000003300000022040555115550dc00cd000000000000000000000000000000000000000000000000000000000
0000000055555555555dd55577777777000000000033330000055040555115550dd00dd000000000000000000000000000000000000000000000000000000000
0000000055555555555dd55577777777000000000333333000011040555dd5550000000000000000000000000000000000000000000000000000000000000000
00000000666666666666575588888888888888860333333000000000555555550000000000000000000000000000000000000000000000000000000000000000
00000000666666666666575588888888877777860033330000000000555555550000000000000000000000000000000000000000000000000000000000000000
00000000666666666666575577777777887778860004400000000000555555550000000000000000000000000000000000000000000000000000000000000000
00000000666666666666575577770777688788660004400000ffff0055444455099cc9cc00000000000000000000000000000000000000000000000000000000
000000006666666666665755777707776688866600044000005ff500554f4f55090cc0cc00000000000000000000000000000000000000000000000000000000
00000000666666666666575577070077666866660004400000ffff00554444550000000000000000000000000000000000000000000000000000000000000000
000000006666666666665755770707776665666600044000000ee000555115550000000000000000000000000000000000000000000000000000000000000000
00000000666666666666575570000007666566660004400000011000555dd5550000000000000000000000000000000000000000000000000000000000000000
00000000575555555555557500000000666566660000000000000000000000000007000000000000000000000000000000000000000000000000000000000000
00000000575555555555557500000000666566660000000000000000000000000077700000000000000000000000000000000000000000000000000000000000
00000000575555555555557500000000666566660000000009400004004444000077700000000000000000000000000000000000000000000000000000000000
00000000575555555555557500000000666566660000000044444444004f4f000aaaaa0000000000000000000000000000000000000000000000000000000000
00000000575555555555557500000000666566660000000000444440004444c00999990000000000000000000000000000000000000000000000000000000000
0000000057555555555555750000000066656666000000000004004000011c000099900000000000000000000000000000000000000000000000000000000000
000000005755555555555575000000006665666600000000004404400dccccd00099900000000000000000000000000000000000000000000000000000000000
000000005755555555555575000000006666666600000000000000000dd00dd00009000000000000000000000000000000000000000000000000000000000000
